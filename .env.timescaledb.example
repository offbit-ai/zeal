# TimescaleDB Configuration for Flow Traces
# Separate database for time-series flow trace data

# TimescaleDB Connection Settings
TIMESCALE_HOST=localhost
TIMESCALE_PORT=5432
TIMESCALE_DATABASE=zeal_traces
TIMESCALE_USER=postgres
TIMESCALE_PASSWORD=postgres

# Connection Pool Settings (optimized for high-volume time-series writes)
TIMESCALE_POOL_MAX=20
TIMESCALE_POOL_MIN=5

# Statement timeout for long-running aggregation queries (in milliseconds)
TIMESCALE_STATEMENT_TIMEOUT=30000

# SSL Configuration (production only)
# TIMESCALE_SSL=true
# TIMESCALE_SSL_REJECT_UNAUTHORIZED=true

# Retention Policy Configuration
# These control how long data is kept in TimescaleDB before automatic deletion
# Format: PostgreSQL interval (e.g., "30 days", "6 months", "1 year")
TIMESCALE_RETENTION_FLOW_TRACES=30 days      # Detailed trace data between nodes
TIMESCALE_RETENTION_TRACE_EVENTS=7 days      # Granular node execution events
TIMESCALE_RETENTION_SESSIONS=90 days         # Session-level aggregated data

# To apply custom retention policies after TimescaleDB is running:
# ./scripts/configure-timescale-retention.sh

# Note: If TimescaleDB variables are not set, the system will fall back to 
# the main POSTGRES_* variables with the database name 'zeal_traces'